{% extends 'base.html' %}
{% load ygol_filter_tag %}

{% block header_content %}
<style>
.center {
 width: auto;
 display: table;
 margin-left: auto;
 margin-right: auto;
}
.text-center > table > tbody > tr > th,
.text-center > table > thead > tr > th {
 text-align: center;
}

.table-responsive {
width: 100%;
margin-bottom: 15px;
overflow-x: scroll;
overflow-y: hidden;
border: 1px solid #dddddd;
-ms-overflow-style: -ms-autohiding-scrollbar;
-webkit-overflow-scrolling: touch;
}
.table-responsive > .table {
margin-bottom: 0;
}
.table-responsive > .table > thead > tr > th,
.table-responsive > .table > tbody > tr > th,
.table-responsive > .table > tfoot > tr > th,
.table-responsive > .table > thead > tr > td,
.table-responsive > .table > tbody > tr > td,
.table-responsive > .table > tfoot > tr > td {
white-space: nowrap;
}


.NoNewline
{
word-break: keep-all;/*必须*/
white-space: nowrap;
}


.ace_editor.fullScreen {
    height: auto !important;
    width: auto;
    border: 0;
    margin: 0;
    position: fixed !important;
    top: 0;
    bottom: 0;
    left: 0;
    right: 0;
    z-index: 1001;
}

.fullScreen {
    overflow: hidden
}

.editor {
    margin: 0;
    position: relative;
    height: 400px;
    top: 0;
    bottom: 0;
    left: 0;
    right: 0;
}

.oneline {
    width:100px;
    overflow:hidden;
    white-space:nowrap;
    ext-overflow:ellipsis;
}

.pointer{
cursor:pointer;
}
</style>
	<!-- Datepicker -->
    <link href="/static/template/css/bootstrap-datepicker.min.css" rel="stylesheet"/>
    <link href="/static/template/css/chosen/chosen.min.css" rel="stylesheet"/>
    <link href="/static/plugins/guide-step/jquery-step/css/jquery.step.css" rel="stylesheet"/>
    <link href="/static/plugins/guide-step/css/index.css" rel="stylesheet"/>
{% endblock %}


{% block container %}
<div id="main-container">
    <div id="breadcrumb">
        <ul class="breadcrumb">
             <li><i class="fa fa-home"></i><a href="/"> Home</a></li>
             <li>作业平台</li>
             <li class="active">编辑作业</li>
        </ul>
    </div><!--breadcrumb-->

    <div class="padding-md">
        <div class="row">
            <div class="col-md-10">
                <div class="panel panel-default">
                    <div class="panel-body">
                        <form class="form-horizontal">
                            <div class="form-group">
                                <label for="inputEmail1" class="col-lg-2 control-label">作业名称</label>
                                <div class="col-lg-10">
                                    <input type="text" class="form-control input-sm" id="taskName" placeholder="name">
                                </div><!-- /.col -->
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-md-10">
                <div class="panel panel-default">
                    123



                </div><!-- /panel -->
                <div class="panel panel-default">
                    <div class="panel-body">
                        <form class="form-horizontal">
                            <div class="form-group">
                                <div class="col-lg-offset-5 col-lg-2">
                                    <button type="button" id="save" class="btn btn-primary btn-sm">
                                        <i class="fa fa-floppy-o"></i> SAVE
                                    </button>
                                </div><!-- /.col -->
                            </div><!-- /form-group -->
                        </form>
                    </div>
                </div><!-- /panel -->
            </div><!-- /.col -->
        </div><!-- /.row -->
	</div><!-- /padding-md -->
</div><!-- /main-container -->
{% include 'job/taskTemplate.html' %}
    3333
<div class="step-body" id="myStep">

	<div class="step-header" style="width:80%">
		<ul>
			<li><p>阅读流明</p></li>
			<li><p>用电申请</p></li>
			<li><p>完成</p></li>
		</ul>
	</div>
	<div class="step-content">
		<div class="step-list">
			<div class="page-panel-title">
					<h3 class="page-panel-title-left">流程说明</h3>
					<h3 class="page-panel-title-right" >注：黄色为需要你配合的环节</h3>
			</div>
			<div class="intro-flow">
				<div class="intro-list">
					<div class="intro-list-left">
						业务受理
					</div>
					<div class="intro-list-right">
						<span>1</span>
						<div class="intro-list-content">
							无需您出门，请备齐相关资料，并保持联系电话的畅通，我们会及时受理您的申请，与您预约进行现场堪察，届时会同步收取相关资料。若资料不齐全的，需要您亲自到实体营业厅补交。
						</div>
					</div>
				</div>


				<div class="intro-list intro-list-active">
					<div class="intro-list-left">
						现场堪察
					</div>
					<div class="intro-list-right">
						<span>2</span>
						<div class="intro-list-content">
							根据实际现场堪察内容补充。
						</div>
					</div>
				</div>

				<div class="intro-list">
					<div class="intro-list-left">
						现场堪察答复客户
					</div>
					<div class="intro-list-right">
						<span>3</span>
						<div class="intro-list-content">
							我局将就电网对您业务是否具备供电能力进行勘察，并向您回复相关情况。
						</div>
					</div>
				</div>

				<div class="intro-list">
					<div class="intro-list-left">
						申报俊工检查
					</div>
					<div class="intro-list-right">
						<span>4</span>
						<div class="intro-list-content">
							我局将对受电工程进行竣工检验。
						</div>
					</div>
				</div>

				<div class="intro-list intro-list-active">
					<div class="intro-list-left">
						供用电合同及装（换）计量装置
					</div>
					<div class="intro-list-right">
						<span>4</span>
						<div class="intro-list-content">
							我局将与您预约上门签订供用电合同、装表接电的事宜，请保持电话申能并留意接收。为保障双方的合法权益，请业主在场签约（盖章）
						</div>
					</div>
				</div>

				<div class="intro-list intro-list-last">
					<div class="intro-list-left">
						完成
					</div>
					<div class="intro-list-right">
						<span>4</span>
						<div class="intro-list-content">
							您可以享受到安全可靠的电源 了。请在网厅进行注册，并绑定您的用户编号，以后您可以便捷地使用电费查询、电费缴纳、账单订阅等服务。
						</div>
					</div>
				</div>
			</div>
			<div class="footer-btn">
				<div class="common-btn">
					<a href="javascript:void(0);" id="applyBtn">马上申请</a>
				</div>
			</div>
		</div>
		<div class="step-list">
			<div class="footer-btn">
				<div class="common-btn">
					<a href="javascript:void(0);" id="submitBtn">提交</a>
				</div>
			</div>

		</div>
		<div class="step-list">
			<div class="apply-finish">
				<div class="apply-finish-header">
					<img src="/static/plugins/guide-step/images/success.png">
					<div class="apply-finish-msg">恭喜您，提交成功！</div>
				</div>
				<div class="apply-finish-footer">
					<p>尊敬的用户，您已提交成功，受理编号为<span id="proNo">LS23423432</span>。</p>
					<p><a href="demo-step.html">查看单独demo</a></p>
				</div>
			</div>
		</div>

	</div>

</div>
{% endblock %}

{% block footer_content %}


<!-- Datepicker -->
<script src='/static/template/js/bootstrap-datepicker.js'></script>
<script src='/static/template/js/bootstrap-datepicker.zh-CN.min.js'></script>
<script src='/static/template/js/chosen.jquery.min.js'></script>
<script src="/static/plugins/ace/ace.js"></script>
<script src="/static/plugins/ace/ext-themelist.js" type="text/javascript" charset="utf-8"></script>
<script src="/static/plugins/ace/ext-language_tools.js" type="text/javascript" charset="utf-8"></script>
<script src="/static/js/lol.js" type="text/javascript" charset="utf-8"></script>
<script src="/static/plugins/guide-step/jquery-step/js/jquery.step.js" type="text/javascript" charset="utf-8"></script>
<script>
$(document).ready(function(){
  // 在这里写你的代码...
  $("#para").mouseenter(function(){
    var text = $(this).children().text();
    //tips层-上
    layer.tips(text, $(this), {
      tips: [1, '#0FA6D8'] //还可配置颜色
    });
  });
    $("#para").mouseleave(function(){
        layer.closeAll()
  });
});


/**
 * 等待页面所有图片、js文件加载完再执行，否则ace执行失败
 */
$(window).load(function() {
    var curl = window.location.href.split('/');
    var _id = curl[curl.length -2];
    var url = '/job/getTask/';
    $.ajax({
       type: "POST",
       url: url,
       data: {'id': _id},
       success: function(jdata){
           var data =$.parseJSON(jdata);
           console.log(data)
           loadTask(data)
       }
    });

    initAddOrd();
    ordUp();
    ordDown();
    blockUp();
    blockDown();
    ordDelete();
    blockDelete();
    addFileBlockOrd();
    addScriptBlockOrd();
    selectScript();
});


/**
 * save new task
 */
$('#save').click(function () {
    var curl = window.location.href.split('/');
    var taskId = curl[curl.length -2];
    var data = getPageTaskData();
    data.nm_task.taskId = taskId;
    var jData = JSON.stringify(data);
    var url = '/job/editTask/';
    console.log(data, taskId)
    $.ajax({
       type: "POST",
       url: url,
       data: {'data': jData},
       success: function(jres){
           var res =$.parseJSON(jres);
           if (res.status == 1){
                var errorMsg = res.msg.join('<br>');
                ajax_callback1(errorMsg);
           }
           else{
               var url = '/job/jobList/';
               ajax_callback1(res.msg, url, true);
           }
       }
    });
})
</script>
{% endblock %}